{%- assign _section = section.settings -%}
{%- assign section_title = _section.title -%}
{%- assign section_content = _section.content -%}

<section class="section section-product">
  <div class="shell">
    {%- if section_title != blank -%}
      <header class="section__head">
        <h2 class="section__title">{{section_title}}</h2><!-- /.section__title -->
      </header><!-- /.section__head -->
    {%- endif -%}

    <div class="section__body">
      <div class="product product--single">
        <div class="product__info flex cols justify-center text-center">
          {%- for block in section.blocks -%}
            {%- assign _block = block.settings -%}
            {%- assign block_image = _block.image -%}
            {%- assign block_title = _block.title -%}
            {%- assign block_alt = _block.image_alt -%}
            {%- assign icon = 'icon-' | append: forloop.index -%}

            {%- if product.metafields.product[icon] != blank -%}
              <div class="col col--1of4">
                {%- if block_image != blank -%}
                  <div class="product__info-image flex flex-column justify-end align-center">
                    <img src="{{block_image | img_url: '500x' }}" alt="{{ block_alt }}">
                  </div>
                {%- endif -%}

                {%- if block_title != blank -%}
                  <p>{{block_title}}</p>
                {%- endif -%}

                <h4>{{product.metafields.product[icon]}}</h4>
              </div><!-- /.col col-/-1of4 -->
            {%- endif -%}
          {%- endfor -%}
        </div><!-- /.flex justify-center -->

        {%- if section_content != blank -%}
          <div class="section__body--inner">
            {{section_content}}
          </div><!-- /.section__body--inner -->
        {%- endif -%}
      </div><!-- /.product -->
    </div><!-- /.section__body -->
  </div><!-- /.shell -->
</section><!-- /.section section-product -->




{% schema %}
{
  "name": "Product Info Section",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title"
    },
    {
      "type": "richtext",
      "id": "content",
      "label": "Content"
    }
  ],
  "blocks": [
    {
      "type": "icon",
      "name": "Icon",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "image_alt",
          "label": "Image Alt Text"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Weight"
        }
      ]
    }
  ]
}
{% endschema %}
